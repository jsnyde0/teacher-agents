# Task: Integrate OA -> PMA Handoff in Chainlit

**ID:** TASK-2024-07-26-04
**Status:** üìù Open
**Date Created:** 2024-07-26

## Description

Modify the Chainlit application (`app_chainlit.py`) to implement the programmatic hand-off between the `Onboarding Agent` (OA) and the `Pedagogical Master Agent` (PMA). When the OA successfully returns the structured `OnboardingData`, the application logic should automatically trigger the PMA using this data as input. Progress should be verifiable via console output.

## Relevant Specifications

*   Implements the first agent hand-off step defined in `.cursor/specs/mvp/teacher_mvp_definition.md` (Section 4).
*   Connects agents developed in `TASK-2024-07-26-01` and `TASK-2024-07-26-03`.

## Acceptance Criteria

*   [ ] `@cl.on_chat_start` in `app_chainlit.py` initializes both OA and PMA instances and stores them in the user session.
*   [ ] `@cl.on_message` logic is updated:
    *   [ ] When `result.data` from OA is `OnboardingData`, print this data to the console.
    *   [ ] Construct the input prompt for the PMA using the received `OnboardingData`.
    *   [ ] Retrieve the PMA instance from the user session and call its `run` method with the constructed prompt.
    *   [ ] Print the `PedagogicalGuidelines` received from the PMA (or any errors) to the console.
    *   [ ] Update the Chainlit UI message to indicate onboarding is complete and guidelines are generated (displaying the guideline text is acceptable for MVP).
*   [ ] The app still correctly handles the conversational string responses from the OA during the information gathering phase.

## Learnings

*(Empty - to be filled during implementation)*
